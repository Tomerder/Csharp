using System;
using PerformanceHarness;

[MeasurableClass]
public static class MultidimArrayTest
{
     private static volatile int _x;
     private static int[,] _array;

	[SetupMethod]
	static void Setup()
	{
         _array = new int[100,100];
	}

	[TeardownMethod]
	static void Teardown()
	{
          _array = null;
          GC.Collect();
	}

	[MeasurableMethod]
	static void Measure()
	{
          int[,] array = _array;
		for (int __i = 0; __i < %NUMBER_OF_ITERATIONS%; ++__i)
		{
               int dim0 = array.GetUpperBound(0);
               int dim1 = array.GetUpperBound(1);
               for (int i = 0; i < dim0; ++i)
                  for (int j = 0; j < dim1; ++j)
                       _x += array[i,j];
		}
	}
}